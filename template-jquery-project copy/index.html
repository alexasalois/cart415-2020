<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>

  <!-- CSS stylesheet(s) -->
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Libraries -->
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

  <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />

  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>

  <!-- My script(s) -->
  <script src="js/script.js"></script>
</head>


  <!-- Javascript -->
  <script>

    function startGame() {
      $("#game").css("display","block");
      $("#button").css("display","none");
      $("#intro").css("display","none");
      level1();

      var song = document.getElementById("bgMusic");
      song.play();
      song.addEventListener('ended', function() {
        this.currentTime = 0;
        this.play();
      }, false);
    }

/////////////////////////////////////////////////////////////

    function level1() {
      var redPoints = 0;
      var bluePoints = 0;
      var yellowPoints = 0;


      $( "#red" ).draggable();
      $( "#redtarget" ).droppable({
            accept: "#red",
            drop: function( event, ui ) {
              $( this )
              redPoints++;
              if (redPoints > 0 && yellowPoints > 0 && bluePoints > 0) {
                level2();
              }
            }
          });

        $( "#yellow" ).draggable();
        $( "#yellowtarget" ).droppable({
              accept: "#yellow",
              drop: function( event, ui ) {
                $( this )
                yellowPoints++;
                if (redPoints > 0 && yellowPoints > 0 && bluePoints > 0) {
                  level2();
                }
            }
          });

          $( "#blue" ).draggable();
          $( "#bluetarget" ).droppable({
                accept: "#blue",
                drop: function( event, ui ) {
                  $( this )
                  bluePoints++;
                  if (redPoints > 0 && yellowPoints > 0 && bluePoints > 0) {
                    level2();
                  }
              }
            });
          };

/////////////////////////////////////////////////////////////


          function level2() {
            $('#level2').css({display: 'block'});
            $('#level1').css({display: 'none'});

            var greenPoints = 0;
            var orangePoints = 0;
            var purplePoints = 0;

            $( "#green" ).draggable();
            $( "#greentarget" ).droppable({
                  accept: "#green",
                  drop: function( event, ui ) {
                    $( this )
                    greenPoints++;
                    if (greenPoints > 0 && orangePoints > 0 && purplePoints > 0) {
                      level3();
                    }
                  }
                });

              $( "#orange" ).draggable();
              $( "#orangetarget" ).droppable({
                    accept: "#orange",
                    drop: function( event, ui ) {
                      $( this )
                      orangePoints++;
                      if (greenPoints > 0 && orangePoints > 0 && purplePoints > 0) {
                        level3();
                      }
                    }
                  });

                $( "#purple" ).draggable();
                $( "#purpletarget" ).droppable({
                      accept: "#purple",
                      drop: function( event, ui ) {
                        $( this )
                        purplePoints++;
                        if (greenPoints > 0 && orangePoints > 0 && purplePoints > 0) {
                          level3();
                        }
                      }
                    });
                  }

/////////////////////////////////////////////////////////////

              function level3(){
                $('#bubble').css({display: 'none'});
                $('#level2').css({display: 'none'});
                $('#speech2').css({display: 'none'});
                $('#redMix').css({display: 'none'});
                $('#confused').css({display: 'none'});

                $("#scene1").css("display","block");
                setTimeout(function(){ $('#scene1').css({display: 'none'}); }, 1000);

                $('#level3').css({display: 'block'});
                $('#ninsun').css({display: 'block'});
                $('#speech2').css({display: 'block'});
                $('#confused').css({display: 'block'});
                $( "#redMix" ).css({display: 'block'});
                $( "#blueMix" ).css({display: 'block'});

                $( "#redMix" ).draggable();
                $( "#blueMix" ).draggable();
                $( "#red2Mix" ).draggable();
                $( "#blue2Mix" ).draggable();
                $( "#yellowMix" ).draggable();
                $( "#yellow2Mix" ).draggable();

                $( "#blueMix" ).droppable({
                      accept: "#redMix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#blueMix').css({display: 'none'});
                        $('#scene2').css({display: 'block'});
                        setTimeout(function(){$("#scene2").css({display: 'none'}); }, 1000);

                        $('#redMix').css({"background-color": 'purple'});
                        $('#red2Mix').css({display: 'block'});
                        $('#yellowMix').css({display: 'block'});
                      }
                    });

                $( "#redMix" ).droppable({
                      accept: "#blueMix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#blueMix').css({display: 'none'});
                        $('#scene2').css({display: 'block'});
                        setTimeout(function(){$("#scene2").css({display: 'none'}); }, 1000);

                        $('#redMix').css({"background-color": 'purple'});
                        $('#red2Mix').css({display: 'block'});
                        $('#yellowMix').css({display: 'block'});
                      }
                    });

                $( "#red2Mix" ).droppable({
                      accept: "#yellowMix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#red2Mix').css({display: 'none'});
                        $('#scene3').css({display: 'block'});
                        setTimeout(function(){$("#scene3").css({display: 'none'}); }, 1000);

                        $('#yellowMix').css({"background-color": 'orange'});
                        $('#yellow2Mix').css({display: 'block'});
                        $('#blue2Mix').css({display: 'block'});
                      }
                    });

                $( "#yellowMix" ).droppable({
                      accept: "#red2Mix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#red2Mix').css({display: 'none'});
                        $('#scene3').css({display: 'block'});
                        setTimeout(function(){$("#scene3").css({display: 'none'}); }, 1000);

                        $('#yellowMix').css({"background-color": 'orange'});
                        $('#yellow2Mix').css({display: 'block'});
                        $('#blue2Mix').css({display: 'block'});
                      }
                    });

                $( "#yellow2Mix" ).droppable({
                      accept: "#blue2Mix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#yellow2Mix').css({display: 'none'});
                        $('#scene4').css({display: 'block'});
                        setTimeout(function(){$("#scene4").css({display: 'none'}); }, 1000);

                        $('#blue2Mix').css({"background-color": 'green'});
                        level4();
                      }
                    });


                $( "#blue2Mix" ).droppable({
                      accept: "#yellow2Mix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#yellow2Mix').css({display: 'none'});
                        $('#scene4').css({display: 'block'});
                        setTimeout(function(){$("#scene4").css({display: 'none'}); }, 5000);

                        $('#blue2Mix').css({"background-color": 'green'});
                        level4();
                      }
                    });
                  }

////////////////////////////////////////////////////////////

                function level4() {
                  $("#ninsun").css("display","none");
                  $("#gilgamesh").css("display","none");
                  $("#confused").css("display","none");
                  $("#speech2").css("display","none");

                  $('#level4').css({display: 'block'});
                  $("#ninsun_end").css("display","block");
                  $("#enkidu").css("display","block");

                  $('#blue2Mix').css({display: 'none'});
                  $('#yellowMix').css({display: 'none'});
                  $('#redMix').css({display: 'none'});

                  var correctColours = 0;

                  $( "#blueMemory" ).draggable();
                  $( "#redMemory" ).draggable();
                  $( "#yellowMemory" ).draggable();
                  $( "#greenMemory" ).draggable();
                  $( "#orangeMemory" ).draggable();
                  $( "#purpleMemory" ).draggable();

                  spawnBlocks();

                  function spawnBlocks() {
                    $('#redMemory').css({display: 'block'});
                    $('#blueMemory').css({display: 'block'});
                    $('#yellowMemory').css({display: 'block'});
                    $('#greenMemory').css({display: 'block'});
                    $('#orangeMemory').css({display: 'block'});
                    $('#purpleMemory').css({display: 'block'});
                    $('#answerBox').css({display: 'block'});

                    $('#help1').css({display: 'block'});

                    $( "#answerBox" ).droppable({
                        accept: "#redMemory,#orangeMemory,#blueMemory",
                        drop: function( event, ui ) {
                          $( this )
                            correctColours++;
                            console.log("correct !"+(correctColours));
                            if (correctColours > 2) {
                              $('#help1').css({display: 'none'});
                              $('#scene5').css({display: 'block'});
                              setTimeout(function(){$("#scene5").css({display: 'none'}); }, 6000)
                              spawnBlocks2();
                            }
                          }
                        });
                      }

                      function spawnBlocks2() {
                        correctColours = 0;
                        $('#redMemory').css({display: 'block',top:'110px', right: '-250px'});
                        $('#blueMemory').css({display: 'block', bottom: '12px', left: '70px'});
                        $('#yellowMemory').css({display: 'block', left:'10px', top: '7px'});
                        $('#greenMemory').css({display: 'block', left: '130px', bottom: '45px'});
                        $('#orangeMemory').css({display: 'block', bottom: '220px', left: '190px'});
                        $('#purpleMemory').css({display: 'block', bottom: '170px',  left: '300px'});

                        $('#help2').css({display: 'block'});

                        $( "#answerBox" ).droppable({
                            accept: "#purpleMemory,#yellowMemory,#greenMemory,#redMemory",
                            drop: function( event, ui ) {
                              $( this )
                                correctColours++;
                                console.log("correct !"+(correctColours));
                                if (correctColours > 3) {
                                  $('#help2').css({display: 'none'});
                                  $('#scene6').css({display: 'block'});
                                  setTimeout(function(){$("#scene6").css({display: 'none'}); }, 7000)
                                  spawnBlocks3();
                                }
                              }
                            });
                          }

                          function spawnBlocks3() {
                            correctColours = 0;
                            $('#redMemory').css({display: 'block',top:'110px', right: '-250px'});
                            $('#blueMemory').css({display: 'block', bottom: '12px', left: '70px'});
                            $('#yellowMemory').css({display: 'block', left:'10px', top: '7px'});
                            $('#greenMemory').css({display: 'block', left: '130px', bottom: '45px'});
                            $('#orangeMemory').css({display: 'block', bottom: '220px', left: '190px'});
                            $('#purpleMemory').css({display: 'block', bottom: '170px',  left: '300px'});

                            $('#help3').css({display: 'block'});

                            $( "#answerBox" ).droppable({
                                accept: "#yellowMemory,#blueMemory,#orangeMemory,#purpleMemory,#greenMemory",
                                drop: function( event, ui ) {
                                  $( this )
                                    correctColours++;
                                    console.log("correct !"+(correctColours));
                                    if (correctColours > 4) {
                                      $('#help3').css({display: 'none'});
                                      $('#scene7').css({display: 'block'});
                                    }
                                  }
                                });
                              }
                            }

                            function finalScene() {
                              $('#game').css({display: 'none'})
                              $('#scene8').css({display: 'block'});
                              $('#button').css({display: 'block'});
                            }

                            function ending() {
                              alert("Shh! I'm sleeping... please close the browser page.");
                            }

                            function help1() {
                              $('#scene4').css({display: 'block'});
                              setTimeout(function(){$("#scene4").css({display: 'none'}); }, 2000);
                            }

                            function help2() {
                              $('#scene5').css({display: 'block'});
                              setTimeout(function(){$("#scene5").css({display: 'none'}); }, 2000);
                            }

                            function help3() {
                              $('#scene6').css({display: 'block'});
                              setTimeout(function(){$("#scene6").css({display: 'none'}); }, 2000);
                            }


                    </script>


<body>
<h2 id="intro">"There Gilgamesh dug a well before the setting-sun. <br>He went up the mountain and poured out
fine meal on the ground and said, <br>‘O mountain, dwelling of the gods, bring me a favourable
dream.’"</h2><br><br>
<button id="button" onclick="startGame()">Wake Up</button>

<audio id="bgMusic">
  <source src="assets/sounds/Loneliness.mp3" type="audio/mpeg">
</audio>

<div id= "game">

<div id="gilgamesh">
</div>

<div id="bubble">
</div>

<div id="ninsun">
</div>

<div id= "level1">
  <div id="red" class="ui-widget-content">
  </div>
  <div id="redtarget" class="ui-widget-header">
  </div>
  <div id="blue" class="ui-widget-content">
  </div>
  <div id="bluetarget" class="ui-widget-header">
  </div>
  <div id="yellow" class="ui-widget-content">
  </div>
  <div id="yellowtarget" class="ui-widget-header">
  </div>
</div>

<div id="level2">
  <div id="green" class="ui-widget-content">
  </div>
  <div id="greentarget" class="ui-widget-header">
  </div>
  <div id="orange" class="ui-widget-content">
  </div>
  <div id="orangetarget" class="ui-widget-header">
  </div>
  <div id="purple" class="ui-widget-content">
  </div>
  <div id="purpletarget" class="ui-widget-header">
  </div>
</div>

<div id="level3">

  <div id="scene1">
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <p>Gilgamesh got up to tell his dream to his mother,Ninsun, one of the wise gods.<br><br><br>
  ‘Mother, last night I had a dream'
  <br><br><br>...</p>
  </div>

  <div id="speech2">
  </div>

  <div id="confused">
    <p>?</p>
  </div>

  <div id="blueMix" class="ui-widget-content">
  </div>
  <div id="redMix" class="ui-widget-content">
  </div>
  <div id="yellowMix" class="ui-widget-content">
  </div>
  <div id="blue2Mix" class="ui-widget-content">
  </div>
  <div id="red2Mix" class="ui-widget-content">
  </div>
  <div id="yellow2Mix" class="ui-widget-content">
  </div>

  <div id="scene2">
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <p>"This star of heaven which descended like a meteor from the sky; <br><br><br>which you tried to lift, but found too heavy, when you
tried to move it <br><br><br>it would not budge, and so you brought it to my feet;"<br><br><br>
  <br>...</p>
  </div>

<div id="scene3">
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <p>"He is the strongest of wild creatures, the stuff of Anu;<br><br><br>born
in the grass-lands and the wild hills reared him;<br><br><br> when you see him you will be glad;<br><br><br>...</p>
</div>

<div id="scene4">
  <br>
  <br>
  <br>
  <br>
  <br>
  <p>"This is the meaning of the dream, Gilgamesh."<br><br><br> and the harlot retold them to Enkidu:<br><br><br> <h3>‘When I look at you you have become like a god.</h3>
  <br><h4>Why do you yearn to run wild again</h4><br> <h5>with the beasts in the hills?'</h5> </p>
</div>

</div>

<div id="level4">
<div id="enkidu">
</div>

<div id="ninsun_end">
</div>

<div id="scene5">
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <p> <span style="color:purple">"Get up</span> <br><br><br> <span style="color:yellow">from the ground,</span> <br><br><br> <span style="color:green">the bed of</span>
    <br><br><br> <span style="color:red">a shepherd..."</span></p>
</div>

<div id="scene6">
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <p> <span style="color:yellow">He listened </span> <br><br><br> <span style="color:blue">to her words </span> <br><br><br> <span style="color:orange">with care. </span>
    <br><br><br> <span style="color:purple">It was good advice </span> <br><br><br> <span style="color:green">that she gave. </span></p>
</div>

<div id="scene7">
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <p>"Mother? <br><br>I dreamed a second dream........"</p> <br><br><br><br>
  <button id="gameOver" onclick="finalScene()"
  >sleep</button>
</div>

<button id="help1" onclick="help1()">I can't remember...</button>
<button id="help2" onclick="help2()">What was it again?</button>
<button id="help3" onclick="help3()">I need to remember...</button>

  <div id="redMemory" class="ui-widget-content">
  </div>
  <div id="blueMemory" class="ui-widget-content">
  </div>
  <div id="yellowMemory" class="ui-widget-content">
  </div>
  <div id="greenMemory" class="ui-widget-content">
  </div>
  <div id="purpleMemory" class="ui-widget-content">
  </div>
  <div id="orangeMemory" class="ui-widget-content">
  </div>

<div id="answerBox">
</div>
</div>

</div>

<div id="scene8">
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <p>Thank you for playing :)</p> <br><br><br>
  <p><span style="font-size:12px">Design & Graphics by Alex</span></p>
  <p><span style="font-size:12px">Music by Pixel Beats</span></p>
  <br>
  <br>
  <button id="button2" onclick="ending()";>Wake Up</button>
</div>

</body>
</html>
