<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>

  <!-- CSS stylesheet(s) -->
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Libraries -->
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

  <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />

  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>

  <!-- My script(s) -->
  <script src="js/script.js"></script>
</head>


  <!-- Javascript -->
  <script>

    function startGame() {
      $("#game").css("display","block");
      $("#button").css("display","none");
      $("#intro").css("display","none");

      var song = document.getElementById("bgMusic");
      song.play();
      song.addEventListener('ended', function() {
        this.currentTime = 0;
        this.play();
      }, false);
    }

/////////////////////////////////////////////////////////////

    $( function() {
      var redPoints = 0;
      var bluePoints = 0;
      var yellowPoints = 0;


      $( "#red" ).draggable();
      $( "#redtarget" ).droppable({
            accept: "#red",
            drop: function( event, ui ) {
              $( this )
              redPoints++;
              if (redPoints > 0 && yellowPoints > 0 && bluePoints > 0) {
                level2();
              }
            }
          });

        $( "#yellow" ).draggable();
        $( "#yellowtarget" ).droppable({
              accept: "#yellow",
              drop: function( event, ui ) {
                $( this )
                yellowPoints++;
                if (redPoints > 0 && yellowPoints > 0 && bluePoints > 0) {
                  level2();
                }
            }
          });

          $( "#blue" ).draggable();
          $( "#bluetarget" ).droppable({
                accept: "#blue",
                drop: function( event, ui ) {
                  $( this )
                  bluePoints++;
                  if (redPoints > 0 && yellowPoints > 0 && bluePoints > 0) {
                    level2();
                  }
              }
            });
          });

/////////////////////////////////////////////////////////////


          function level2() {
            $('#level2').css({display: 'block'});
            $('#level1').css({display: 'none'});

            var greenPoints = 0;
            var orangePoints = 0;
            var purplePoints = 0;

            $( "#green" ).draggable();
            $( "#greentarget" ).droppable({
                  accept: "#green",
                  drop: function( event, ui ) {
                    $( this )
                    greenPoints++;
                    if (greenPoints > 0 && orangePoints > 0 && purplePoints > 0) {
                      level3();
                    }
                  }
                });

              $( "#orange" ).draggable();
              $( "#orangetarget" ).droppable({
                    accept: "#orange",
                    drop: function( event, ui ) {
                      $( this )
                      orangePoints++;
                      if (greenPoints > 0 && orangePoints > 0 && purplePoints > 0) {
                        level3();
                      }
                    }
                  });

                $( "#purple" ).draggable();
                $( "#purpletarget" ).droppable({
                      accept: "#purple",
                      drop: function( event, ui ) {
                        $( this )
                        purplePoints++;
                        if (greenPoints > 0 && orangePoints > 0 && purplePoints > 0) {
                          level3();
                        }
                      }
                    });
                  }

/////////////////////////////////////////////////////////////

              function level3(){
                $('#level3').css({display: 'block'});
                $('#ninsun').css({display: 'block'});
                $('#speech2').css({display: 'block'});

                $('#bubble').css({display: 'none'});
                $('#level2').css({display: 'none'});

                $( "#redMix" ).draggable();
                $( "#blueMix" ).draggable();
                $( "#red2Mix" ).draggable();
                $( "#blue2Mix" ).draggable();
                $( "#yellowMix" ).draggable();
                $( "#yellow2Mix" ).draggable();

                $( "#blueMix" ).droppable({
                      accept: "#redMix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#blueMix').css({display: 'none'});
                        $('#redMix').css({"background-color": 'purple'});
                        $('#red2Mix').css({display: 'block'});
                        $('#yellowMix').css({display: 'block'});
                      }
                    });

                $( "#redMix" ).droppable({
                      accept: "#blueMix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#blueMix').css({display: 'none'});
                        $('#redMix').css({"background-color": 'purple'});
                        $('#red2Mix').css({display: 'block'});
                        $('#yellowMix').css({display: 'block'});
                      }
                    });

                $( "#red2Mix" ).droppable({
                      accept: "#yellowMix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#red2Mix').css({display: 'none'});
                        $('#yellowMix').css({"background-color": 'orange'});
                        $('#yellow2Mix').css({display: 'block'});
                        $('#blue2Mix').css({display: 'block'});
                      }
                    });

                $( "#yellowMix" ).droppable({
                      accept: "#red2Mix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#red2Mix').css({display: 'none'});
                        $('#yellowMix').css({"background-color": 'orange'});
                        $('#yellow2Mix').css({display: 'block'});
                        $('#blue2Mix').css({display: 'block'});
                      }
                    });

                $( "#yellow2Mix" ).droppable({
                      accept: "#blue2Mix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#yellow2Mix').css({display: 'none'});
                        $('#blue2Mix').css({"background-color": 'green'});
                        level4();
                      }
                    });


                $( "#blue2Mix" ).droppable({
                      accept: "#yellow2Mix",
                      drop: function( event, ui ) {
                        $( this )
                        $('#yellow2Mix').css({display: 'none'});
                        $('#blue2Mix').css({"background-color": 'green'});
                        setTimeout(level4, 5000);
                      }
                    });
                  }

////////////////////////////////////////////////////////////

                function level4() {
                  $("#ninsun").css("display","none");
                  $("#gilgamesh").css("display","none");
                  $("#confused").css("display","none");
                  $("#speech2").css("display","none");

                  $("#ninsun_end").css("display","block");
                  $("#enkidu").css("display","block");

                  var correctColours = 0;

                  $('#blue2Mix').css({display: 'none'});
                  $('#yellowMix').css({display: 'none'});
                  $('#redMix').css({display: 'none'});

                  $( "#blueMemory" ).draggable();
                  $( "#redMemory" ).draggable();
                  $( "#yellowMemory" ).draggable();
                  $( "#greenMemory" ).draggable();
                  $( "#orangeMemory" ).draggable();
                  $( "#purpleMemory" ).draggable();

                  $('#level4').css({display: 'block'});
                  $('#colorOrder1').css({display: 'block'});

                  setTimeout(function(){ $('#colorOrder1').css({display: 'none'}); }, 5000);
                  setTimeout(spawnBlocks, 5000);

                  function spawnBlocks() {
                    $('#redMemory').css({display: 'block'});
                    $('#blueMemory').css({display: 'block'});
                    $('#yellowMemory').css({display: 'block'});
                    $('#greenMemory').css({display: 'block'});
                    $('#orangeMemory').css({display: 'block'});
                    $('#purpleMemory').css({display: 'block'});

                    $( "#answerBox" ).droppable({
                        accept: "#redMemory,#orangeMemory,#blueMemory",
                        drop: function( event, ui ) {
                          $( this )
                            correctColours++;
                            console.log("correct !"+(correctColours));
                            if (correctColours > 2) {
                              $('#redMemory').css({display: 'none'});
                              $('#blueMemory').css({display: 'none'});
                              $('#yellowMemory').css({display: 'none'});
                              $('#greenMemory').css({display: 'none'});
                              $('#orangeMemory').css({display: 'none'});
                              $('#purpleMemory').css({display: 'none'});
                              $('#colorOrder2').css({display: 'block'});

                              setTimeout(function(){ $('#colorOrder2').css({display: 'none'}); }, 5000);
                              setTimeout(spawnBlocks2,5000);
                            }
                          }
                        });
                      }

                      function spawnBlocks2() {
                        correctColours = 0;
                        $('#redMemory').css({display: 'block',position: 'fixed'});
                        $('#blueMemory').css({display: 'block',position: 'fixed'});
                        $('#yellowMemory').css({display: 'block',position: 'fixed'});
                        $('#greenMemory').css({display: 'block',position: 'fixed'});
                        $('#orangeMemory').css({display: 'block',position: 'fixed'});
                        $('#purpleMemory').css({display: 'block',position: 'fixed'});

                        $( "#answerBox" ).droppable({
                            accept: "#purpleMemory,#yellowMemory,#greenMemory,#redMemory",
                            drop: function( event, ui ) {
                              $( this )
                                correctColours++;
                                console.log("correct !"+(correctColours));
                                if (correctColours > 3) {
                                  console.log("you did it!");
                                  $('#redMemory').css({display: 'none'});
                                  $('#blueMemory').css({display: 'none'});
                                  $('#yellowMemory').css({display: 'none'});
                                  $('#greenMemory').css({display: 'none'});
                                  $('#orangeMemory').css({display: 'none'});
                                  $('#purpleMemory').css({display: 'none'});
                                  $('#colorOrder3').css({display: 'block'});

                                  setTimeout(function(){ $('#colorOrder3').css({display: 'none'}); }, 5000);
                                  setTimeout(spawnBlocks3,5000);
                                }
                              }
                            });
                          }

                          function spawnBlocks3() {
                            correctColours = 0;
                            $('#redMemory').css({display: 'block',position: 'fixed'});
                            $('#blueMemory').css({display: 'block',position: 'fixed'});
                            $('#yellowMemory').css({display: 'block',position: 'fixed'});
                            $('#greenMemory').css({display: 'block',position: 'fixed'});
                            $('#orangeMemory').css({display: 'block',position: 'fixed'});
                            $('#purpleMemory').css({display: 'block',position: 'fixed'});

                            $( "#answerBox" ).droppable({
                                accept: "#yellowMemory,#blueMemory,#orangeMemory,#purpleMemory,#greenMemory",
                                drop: function( event, ui ) {
                                  $( this )
                                    correctColours++;
                                    console.log("correct !"+(correctColours));
                                    if (correctColours > 4) {
                                      console.log("you did it!");
                                      $('#redMemory').css({display: 'none'});
                                      $('#blueMemory').css({display: 'none'});
                                      $('#yellowMemory').css({display: 'none'});
                                      $('#greenMemory').css({display: 'none'});
                                      $('#orangeMemory').css({display: 'none'});
                                      $('#purpleMemory').css({display: 'none'});
                                      $('#colorOrder2').css({display: 'block'});
                                    }
                                  }
                                });
                              }


                }



    </script>

<body>
<h4 id="intro">"There Gilgamesh dug a well before the setting-sun. <br>He went up the mountain and poured out
fine meal on the ground and said, <br>‘O mountain, dwelling of the gods, bring me a favourable
dream.’"</h4>
<button id="button" onclick="startGame()">Wake Up</button>

<audio id="bgMusic">
  <source src="assets/sounds/Loneliness.mp3" type="audio/mpeg">
</audio>

<div id= "game">

<div id="gilgamesh">
</div>

<div id="bubble">
</div>

<div id="ninsun">
</div>

<div id= "level1">
  <div id="red" class="ui-widget-content">
  </div>
  <div id="redtarget" class="ui-widget-header">
  </div>
  <div id="blue" class="ui-widget-content">
  </div>
  <div id="bluetarget" class="ui-widget-header">
  </div>
  <div id="yellow" class="ui-widget-content">
  </div>
  <div id="yellowtarget" class="ui-widget-header">
  </div>
</div>

<div id="level2">
  <div id="green" class="ui-widget-content">
  </div>
  <div id="greentarget" class="ui-widget-header">
  </div>
  <div id="orange" class="ui-widget-content">
  </div>
  <div id="orangetarget" class="ui-widget-header">
  </div>
  <div id="purple" class="ui-widget-content">
  </div>
  <div id="purpletarget" class="ui-widget-header">
  </div>
</div>

<div id="level3">

  <div id="speech2">
  </div>

  <div id="confused">
    <p>?</p>
  </div>

  <div id="blueMix" class="ui-widget-content">
  </div>
  <div id="redMix" class="ui-widget-content">
  </div>
  <div id="yellowMix" class="ui-widget-content">
  </div>
  <div id="blue2Mix" class="ui-widget-content">
  </div>
  <div id="red2Mix" class="ui-widget-content">
  </div>
  <div id="yellow2Mix" class="ui-widget-content">
  </div>
</div>

<div id="level4">

<div id="enkidu">
</div>

<div id="ninsun_end">
</div>

  <div id="redMemory" class="ui-widget-content">
  </div>
  <div id="blueMemory" class="ui-widget-content">
  </div>
  <div id="yellowMemory" class="ui-widget-content">
  </div>
  <div id="greenMemory" class="ui-widget-content">
  </div>
  <div id="purpleMemory" class="ui-widget-content">
  </div>
  <div id="orangeMemory" class="ui-widget-content">
  </div>

<div id="answerBox">
  <p>drop colours here</p>
</div>

  <div id="colorOrder1">
    <p>red, orange, blue</p>
  </div>

  <div id="colorOrder2">
    <p>purple, yellow, green, red</p>
  </div>

  <div id="colorOrder3">
    <p>yellow, blue, orange, purple, green </p>
  </div>
</div>


</div>
</body>
</html>
