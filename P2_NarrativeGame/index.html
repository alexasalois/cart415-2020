<DOCTYPE html>
<html>
<head>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

	<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script>

    // HOME SCREEN //
    $( document ).ready(function() {
      $("#level1").css("display", "none");
      $("#level2").css("display", "none");
      $("#level3").css("display", "none");
    });

    // START BUTTON //
    function startGame() {
      $("#mainMenu").css("display", "none");
      miniGame1();

      var song = document.getElementById("bgMusic");
            song.play();
            song.addEventListener('ended', function() {
              this.currentTime = 0;
              this.play();
            }, false);
    }

    // FIRST MINI GAME: just wait... //
    function miniGame1() {
      $("#environment1").css("display","block");

      $( "#thought1" ).dialog();
        setTimeout(function () {
        $( "#thought2" ).dialog();
        }, 4000);
          setTimeout(function () {
          $( "#thought3" ).dialog();
          }, 7000);
            setTimeout(function () {
            $( "#thought4" ).dialog();
            }, 10000);
          setTimeout(function () {
          $( "#thought5" ).dialog();
          }, 13000);

        setTimeout(
        miniGame2, 17000);
      }

    // SECOND MINI GAME: paying bus fare //
    function miniGame2 () {
      $("#text1").css("display","block");
      $("#miniGame2").css("display", "none");
      $("#text2").css("display", "none");
      $("#text3").css("display", "none");

      setTimeout(function () {
        $("#text1").css("display","none");
        $("#miniGame2").css("display", "block");
      },6000);


      $("#level1").css("display","block");

      $("#level1End").css("display", "none");
      $("#miniGame1").css("display", "none");
      $("#miniGame3").css("display", "none");
      $("#miniGame4").css("display", "none");


        $( "#money" ).draggable();
        $( "#notdraggable" ).draggable();
        $( "#notdraggable2" ).draggable();
        $( "#notdraggable3" ).draggable();

              $( "#droppable" ).droppable({
                accept: "#money",

                drop: function( event, ui ) {
                  $( this )
                    $("#draggable").css("display","none");
                    $("#notdraggable2").css("display","none");
                    $("#notdraggable").css("display","none");
                    $("#droppable").css("display","none");
                    $("#busrules").css("display","none");

                    setTimeout(miniGame3,3000);
                }
              });
            }

    function miniGame3() {
      $("#text2").css("display","block");
      $("#text3").css("display","none");
      $("#miniGame2").css("display", "none");
      $("#miniGame3").css("display", "none");
      $("#halfeyes").css("display", "none");
      $("#openedeyes").css("display", "none");

      setTimeout(function () {
        $("#text2").css("display","none");
        $("#miniGame3").css("display", "block");
      },8000);

    }

    var sleepPoints = 0;
    function addPoints() {
      sleepPoints++;
      setTimeout(pointSystem,2000);
    }

    function pointSystem() {
      sleepPoints = sleepPoints - 1;

      if (sleepPoints < 6 && sleepPoints > 2) {
        $("#halfeyes").css("display", "block");
        $("#closedeyes").css("display", "none");
        $("#openedeyes").css("display", "none");
      }


      if (sleepPoints > 5) {
        $("#halfeyes").css("display", "none");
        $("#closedeyes").css("display", "none");
        $("#openedeyes").css("display", "block");

        console.log("success!");
        setTimeout(miniGame4,3000);
      }
    }

    function miniGame4() {
      $("#miniGame3").css("display", "none");
      $("#miniGame4").css("display", "none");
      $("#text3").css("display", "block");

      setTimeout(function () {
        $("#text3").css("display","none");
        $("#miniGame4").css("display", "block");
      },8000);


        $( function() {
          var slider = $( "#miniGameSlider" ).slider({
            min: 0,
            max: 100,
            step: 10,
            slide: function(event, ui) {
              $("#miniGameSlider" ).val( ui.value );
              $("#value").html(ui.value);

              var sliderValue = ui.value;

              if (sliderValue = 70) {
                setTimeout(endOfLevel1,3000);
              }
            }
          });
        });
      }

      function endOfLevel1() {
        $("#miniGame4").css("display", "none");
        $("#level1End").css("display", "block");

        setTimeout(miniGame1_medium,8000);
      }


      function miniGame1_medium() {
        $("#level2").css("display", "block");
        $("#miniGame1_medium").css("display", "block");

        $("#level1End").css("display", "none");
        $("#level1").css("display", "none");
        $("#miniGame2_medium").css("display", "none");
        $("#miniGame3_medium").css("display", "none");
        $("#miniGame4_medium").css("display", "none");
        $("#level2End").css("display", "none");


        $( "#thought6" ).dialog();
          setTimeout(function () {
          $( "#thought7" ).dialog();
          }, 4000);
            setTimeout(function () {
            $( "#thought8" ).dialog();
            }, 7000);
              setTimeout(function () {
              $( "#thought9" ).dialog();
              }, 10000);
            setTimeout(function () {
            $( "#thought10" ).dialog();
            }, 13000);

            setTimeout(miniGame2_medium,17000);
      }

      function miniGame2_medium() {
        $("#level1").css("display","block");
        $("#miniGame2_medium").css("display", "block");

        $("#miniGame1_medium").css("display", "none");
        $("#miniGame3_medium").css("display", "none");
        $("#miniGame4_medium").css("display", "none");
        $("#text4").css("display", "none");


          $( "#draggable2" ).draggable();
          $( "#draggable3" ).draggable();
          $( "#draggable4" ).draggable();
          $( "#draggable5" ).draggable();

          $( "#droppable2" ).droppable({
              drop: function( event, ui ) {
              $( this )
              $("#draggable2").css("display","none");
              $("#draggable4").css("display","none");
              $("#draggable5").css("display","none");
              $("#droppable2").css("display","none");
              $("#busrules2").css("display","none");
              setTimeout(miniGame3_medium,3000);
              }
            });
          }

        function miniGame3_medium() {
          $("#text4").css("display", "block");
          $("#halfeyes").css("display", "none");
          $("#openedeyes").css("display", "none");

          setTimeout(function(){
            $("#text4").css("display", "none");
            $("#miniGame2_medium").css("display", "none");
            $("#miniGame3_medium").css("display", "block");
          },8000);
        }

          var sleepPoints2 = 0;
          function addPoints2() {
          sleepPoints2++;
          setTimeout(pointSystem2,2000);
          }

          function pointSystem2() {
          sleepPoints2 = sleepPoints2 - 1;

          if (sleepPoints2 > 4 && sleepPoints2 < 9) {
            $("#halfeyes").css("display", "block");
            $("#closedeyes").css("display", "none");
          }


          if (sleepPoints2 > 8) {
            $("#halfeyes").css("display", "none");
            $("#openedeyes").css("display", "block");
            console.log("success!");
            miniGame4_medium();
          }
        }

        function miniGame4_medium() {
          $("#miniGame3_medium").css("display", "none");
          $("#miniGame4_medium").css("display", "block");

            $( function() {
              var slider2 = $( "#miniGameSlider2" ).slider({
                min: 0,
                max: 100,
                step: 5,
                slide: function(event, ui) {
                  $("#miniGameSlider2" ).val( ui.value );
                  $("#value2").html(ui.value);

                  var sliderValue2 = ui.value;

                  if (sliderValue2 = 45) {
                    setTimeout(endOfLevel2,4000);
                  }
                }
              });
            });
          }

        function endOfLevel2() {
          $("#miniGame4_medium").css("display", "none");
          $("#level2End").css("display", "block");

          setTimeout(miniGame1_hard,12000);
        }

        function miniGame1_hard() {
          $("#level3").css("display", "block");
          $("#miniGame1_hard").css("display", "block");

          $("#level2End").css("display", "none");
          $("#level2").css("display", "none");
          $("#miniGame2_hard").css("display", "none");
          $("#miniGame3_hard").css("display", "none");
          $("#miniGame4_hard").css("display", "none");

          $( "#thought11" ).dialog();
            setTimeout(function () {
            $( "#thought12" ).dialog();
            }, 4000);
              setTimeout(function () {
              $( "#thought13" ).dialog();
              }, 7000);
                setTimeout(function () {
                $( "#thought14" ).dialog();
                }, 10000);
              setTimeout(function () {
              $( "#thought15" ).dialog();
              }, 13000);

              setTimeout(miniGame2_hard,17000);
        }

        function miniGame2_hard() {
          $("#miniGame2_hard").css("display", "block");
          setTimeout(miniGame3_hard,15000);
        }

        function miniGame3_hard() {
          $("#miniGame2_hard").css("display", "none");
          $("#miniGame3_hard").css("display", "block");
          setTimeout(miniGame4_hard,17000);
        }

        function miniGame4_hard() {
          $("#miniGame3_hard").css("display", "none");
          $("#miniGame4_hard").css("display", "block");

          setTimeout(function(){
            alert("Finally, you are home. Unless...");
            $("#miniGame4_hard").css("display", "none");
          },12000);
        }


</script>
</head>

<body>

  <audio id="bgMusic">
    <source src="assets/sounds/fall_8bit_drone.mp3" type="audio/mpeg">
  </audio>

<div id="game">

<!-- HOME SCREEN -->
<div id="mainMenu">
  <h1>un/heimlich</h1>
  <p>(use mouse to play)</p>
  <br>
  <p>ɥɔᴉlɯᴉǝɥ/un</p>
  <button onclick="startGame()">Click to Start</button>
</div>

<!-- LEVEL 1 -->
<div id="level1">
  <div id="text1">
    <br>
    <br>
    <br>
    <p>The bus is here. finally.</p>
    <br>
    <p>Time to get on.</p>
    <p>I need to go home soon, it's getting dark.</p>
  </div>

  <!-- FIRST MINI GAME: WAIT FOR THE BUS! -->
  <div id="miniGame1">
    <div id="thought1" title="?#%^*$!)#*()">
      <p>How long do I have to wait here for?</p>
    </div>
    <div id="thought2" title="#$%^*(%^))">
      <p>I'm cold.</p>
    </div>
    <div id="thought3" title="^!@#$@*$***()">
      <p>Hmm, not sure what I'll make for dinner tonight.</p>
    </div>
    <div id="thought4" title="!@##$%^()())">
      <p>That tree looks cool.</p>
    </div>
    <div id="thought5" title="**^%$$##^))">
      <p>Why is the bus always late?</p>
    </div>


  </div>

  <!-- SECOND MINI GAME: GET ON BUS - PAY FOR BUS FARE -->
  <div id="miniGame2">
    <p id="busrules">pay for your fare!</p>
    <div id="draggable">
      <img id="money" src="assets/images/coin_small.png">
    </div>

    <div id="notdraggable">
      <img id="candy" src="assets/images/candyredo.png">
    </div>

    <div id="notdraggable2">
      <img id="bug" src="assets/images/bugredo.png">
    </div>

    <div id="notdraggable3">
      <img id="picture" src="assets/images/picture_small.png">
    </div>

    <div id="droppable">
      <img id="hand" src="assets/images/hand.png">
    </div>
  </div>

  <div id="text2">
    <br>
    <br>
    <p>There's just me in the bus. And this other person.</p>
    <br>
    <p>Are they staring at me?</p>
    <br>
    <br>
    <br>
    <p>I can only make out their eyes. Bright red.</p>
  </div>
  <!-- THIRD MINI GAME: BUS RIDE -->
  <div id="miniGame3">
    <p>don't fall asleep.</p>
    <br>
    <p>spam the button quickly to stay awake.</p>
    <br>
    <br>
    <button id="sleepy" onclick="addPoints()">Open Your Eyes</button>

    <img id="closedeyes" src="assets/images/closed.png">
    <img id="halfeyes" src="assets/images/halfopened.png">
    <img id="openedeyes" src="assets/images/opened.png">
  </div>

  <div id="text3">
    <br>
    <p>I wake up.</p>
    <br>
    <br>
    <p>I think my stop is soon.</p>
    <br>
    <p>There is no one else in the bus.</p>
    <br>
    <br>
    <p>Looking out the window, I see red lights everywhere.</p>
  </div>

  <!-- FOURTH MINI GAME: GET OFF THE BUS -->
  <div id="miniGame4">
    <p>Time to get off the bus. Bus stop number 70...</p>
    <br>
    <div id="miniGameSlider"></div>
    <div id="value">Value: </div>
  </div>

  <div id="level1End">
    <p>H0me?</p>
    <br>
    <br>
    <br>
    <p>There is no one else. I'm at my house now.</p>
    <br>
    <br>
    <p>I turn, and notice the shadow behind me.</p>
    <br>
    <br>
    <br>
    <p>Two red dots stare back.</p>
  </div>
</div>
<!-- END OF LEVEL 1 -->

<div id="level2">
  <div id="miniGame1_medium">
      <div id="thought6" title="?#%^*$!)#*()">
        <p>Who was that?</p>
      </div>
      <div id="thought7" title="#$%^*(%^))">
        <p>I think they were looking at me.</p>
      </div>
      <div id="thought8" title="^!@#$@*$***()">
        <p>Do I look weird? I hope I'm not making it weird.</p>
      </div>
      <div id="thought9" title="!@##$%^()())">
        <p>When is the bus coming?</p>
      </div>
      <div id="thought10" title="**^%$$##^))">
        <p>Wait, why am I taking the bus again?</p>
      </div>
  </div>

  <div id="miniGame2_medium">
    <p id="busrules2">pay!^ for your fa&re!</p>
    <div id="draggable2" >
      <img id="money2" src="assets/images/coin_small.png">
    </div>

    <div id="draggable3" >
      <img id="picture2" src="assets/images/picture.png">
    </div>

    <div id="draggable4" >
      <img id="picture3" src="assets/images/picture_small.png">
    </div>

    <div id="draggable5" >
      <img id="picture4" src="assets/images/picture_small.png">
    </div>

    <div id="droppable2">
      <img id="hand2" src="assets/images/hand.png">
    </div>

    <div id="text4">
      <br>
      <br>
      <br>
      <p>There are red eyes everywhere.</p>
      <br>
      <br>
      <p>I just see red.</p>
      <br>
      <p>My eyelids are heavy,</p>
      <p>The shadow is sitting accross from me.</p>
      <br>
      <br>
      <p>They mirror my breathing.</p>
    </div>
  </div>

  <div id="miniGame3_medium">
    <p>don't</p>
    <p>fall</p>
    <p>asleep.</p>
    <p>sp@m the button! kee p your eyes 0penN!</p>
    <br>
    <br>
    <button id="sleepy2" onclick="addPoints2()">OpenNn Y our  Ey3s</button>

    <img id="closedeyes" src="assets/images/closed.png">
    <img id="halfeyes" src="assets/images/halfopened.png">
    <img id="openedeyes" src="assets/images/opened.png">

  </div>

  <div id="miniGame4_medium">
    <p>Time to get off the bus!dontgetoFfthEbUS:)) Bus stop number 45#!</p>
    <div id="miniGameSlider2"></div>
    <div id="value2">Value: </div>
  </div>

  <div id="level2End">
    <p>hom3!!:) <br><br>you ?made it ?? 'home?'</p>
    <br>
    <br>
    <br>
    <br>
    <p>The red eyes follow my footsteps.</p>
    <br>
    <br>
    <p>I run faster.</p>
    <p>The puddles splash underneath me, <br>the stomping on the concrete resonates in my ear drums.</p>
    <br>
    <p>I run faster.</p>
  </div>

</div>

<div id="level3">
  <div id="miniGame1_hard">
    <div id="thought11" title="?#%^*$!)#*()">
      <p>Who the fuck was that</p>
    </div>
    <div id="thought12" title="#$%^*(%^))">
      <p>Who was that</p>
    </div>
    <div id="thought13" title="^!@#$@*$***()">
      <p>They're following me</p>
    </div>
    <div id="thought14" title="!@##$%^()())">
      <p>I think he's following me</p>
    </div>
    <div id="thought15" title="**^%$$##^))">
      <p>Stop following me</p>
    </div>
  </div>

  <div id="miniGame2_hard">
    <p>I arrive in front of my house.</p>
    <br>
    <br>
    <p>It's quiet.</p>
    <p>The walls are covered in roots and vines,</p>
    <p>The door handle is rusted, and the walls are mushy.</p>
    <br>
    <p>The house is falling apart, disappearing in the environment.</p>
  </div>

  <div id="miniGame3_hard">
    <p>I remember the last time I was here,</p>
    <p>Every day staring at the ruins.</p>
    <br>
    <p>I can't remember the last time I walked in.</p>
    <br>
    <p>Approaching the cracked windows,</p>
    <p>I step in front of the glass.</p>
  </div>

  <div id="miniGame4_hard">
    <p>I stare at the reflection.</p>
    <br>
    <br>
    <p>Two red glowing eyes stare back.</p>
    <br>
    <p>Climbing through the window,</p>
    <p>Together, we walk into my home.</p>
    <br>
    <br>
    <br>
    <button id="startagain" onclick="startGame()">I don't want to go in.</button>
  </div>

<div/>
</div>

</div>

</body>

</html>
